<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://wangquanwwq.github.io/blog</id>
    <title>WangQuan 的个人网站 Blog</title>
    <updated>2025-07-10T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://wangquanwwq.github.io/blog"/>
    <subtitle>WangQuan 的个人网站 Blog</subtitle>
    <icon>https://wangquanwwq.github.io/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[docker安装oracle23]]></title>
        <id>https://wangquanwwq.github.io/blog/2025/07/10/docker安装oracle23</id>
        <link href="https://wangquanwwq.github.io/blog/2025/07/10/docker安装oracle23"/>
        <updated>2025-07-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[docker安装oracle23]]></summary>
        <content type="html"><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker安装oracle23">docker安装oracle23<a href="https://wangquanwwq.github.io/blog/2025/07/10/docker%E5%AE%89%E8%A3%85oracle23#docker%E5%AE%89%E8%A3%85oracle23" class="hash-link" aria-label="Direct link to docker安装oracle23" title="Direct link to docker安装oracle23">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull container-registry.oracle.com/database/free:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 创建 Docker 卷</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker volume create oracle_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 查看Docker卷在本机上的位置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker volume inspect oracle_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 运行 Oracle 容器并挂载卷</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d -it --name oracle23c \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p 1521:1521 -p 5500:5500 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e ORACLE_PWD=YourPassword \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v oracle_data:/opt/oracle/oradata \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  container-registry.oracle.com/database/express:23c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="启动oracel">启动oracel<a href="https://wangquanwwq.github.io/blog/2025/07/10/docker%E5%AE%89%E8%A3%85oracle23#%E5%90%AF%E5%8A%A8oracel" class="hash-link" aria-label="Direct link to 启动oracel" title="Direct link to 启动oracel">​</a></h4>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 启动容器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker </span><span class="token keyword" style="color:#00009f">start</span><span class="token plain"> oracle23c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 连接到 FREEPDB1 可插拔数据库</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker </span><span class="token keyword" style="color:#00009f">exec</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">it oracle23c sqlplus sys</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">XMZXFC430724wq</span><span class="token variable" style="color:#36acaa">@localhost</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">1521</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">FREEPDB1 </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> sysdba</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查看docker内部oracle所在的文件系统</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker </span><span class="token keyword" style="color:#00009f">exec</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">it oracle </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">bin</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在 SQL*Plus 中执行以下 SQL 命令</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLESPACE</span><span class="token plain"> my_blog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DATAFILE </span><span class="token string" style="color:#e3116c">'/opt/oracle/oradata/XE/my_blog.dbf'</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SIZE </span><span class="token number" style="color:#36acaa">50</span><span class="token plain">M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AUTOEXTEND </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">NEXT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">M MAXSIZE </span><span class="token number" style="color:#36acaa">200</span><span class="token plain">M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXTENT MANAGEMENT </span><span class="token keyword" style="color:#00009f">LOCAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USER</span><span class="token plain"> my_blog_user IDENTIFIED </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> my_blog_password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLESPACE</span><span class="token plain"> my_blog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">QUOTA UNLIMITED </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> my_blog</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONNECT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> RESOURCE </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> my_blog_user</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 连接到 FREEPDB1 可插拔数据库</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker </span><span class="token keyword" style="color:#00009f">exec</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">it oracle23c sqlplus my_blog_user</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">my_blog_password</span><span class="token variable" style="color:#36acaa">@localhost</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">1521</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">FREEPDB1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在 SQL*Plus 中执行以下命令来验证</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> default_tablespace </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> dba_users </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'MY_BLOG_USER'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">default_tablespace </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> dba_users </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> username</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'MYBLOG'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">密码：XMZXFC430724wq</span><br></span></code></pre></div></div>]]></content>
        <author>
            <name>Wang Quan</name>
            <uri>https://github.com/WangQuanWWQ</uri>
        </author>
        <category label="Learn" term="Learn"/>
        <category label="Note" term="Note"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[hexo部署]]></title>
        <id>https://wangquanwwq.github.io/blog/2025/07/10/hexo部署</id>
        <link href="https://wangquanwwq.github.io/blog/2025/07/10/hexo部署"/>
        <updated>2025-07-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[借助 hexo 的高效与灵活，我可以轻松管理博客内容，实现快速部署与更新；而 Stellar 的精美布局则为阅读体验增添了许多乐趣。无论你是技术爱好者、设计达人，还是单纯的读者，我都希望这个博客能为你带来启发与愉悦。]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>借助 hexo 的高效与灵活，我可以轻松管理博客内容，实现快速部署与更新；而 Stellar 的精美布局则为阅读体验增添了许多乐趣。无论你是技术爱好者、设计达人，还是单纯的读者，我都希望这个博客能为你带来启发与愉悦。</p>
</blockquote>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="安装hexo和stellar">安装hexo和stellar<a href="https://wangquanwwq.github.io/blog/2025/07/10/hexo%E9%83%A8%E7%BD%B2#%E5%AE%89%E8%A3%85hexo%E5%92%8Cstellar" class="hash-link" aria-label="Direct link to 安装hexo和stellar" title="Direct link to 安装hexo和stellar">​</a></h5>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 我的node版本为当前最新</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 环境准备</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install -g hexo-cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hexo init my-blog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd my-blog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化仓库</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 这是stellar样式库</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git submodule add https://github.com/WangQuanWWQ/hexo-theme-stellar.git themes/stellar</span><br></span></code></pre></div></div>
<blockquote>
<p>参考：</p>
<p><a href="https://xaoxuu.com/wiki/stellar/#start" target="_blank" rel="noopener noreferrer">Stellar：开始您全新的博客之旅 - XAOXUU</a></p>
<p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener noreferrer">文档 | Hexo</a></p>
<p><a href="https://github.com/xaoxuu/hexo-theme-stellar.git" target="_blank" rel="noopener noreferrer">https://github.com/xaoxuu/hexo-theme-stellar.git</a></p>
</blockquote>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="添加stellar主题">添加stellar主题<a href="https://wangquanwwq.github.io/blog/2025/07/10/hexo%E9%83%A8%E7%BD%B2#%E6%B7%BB%E5%8A%A0stellar%E4%B8%BB%E9%A2%98" class="hash-link" aria-label="Direct link to 添加stellar主题" title="Direct link to 添加stellar主题">​</a></h5>
<blockquote>
<p>打开项目根目录下的 <code>_config.yml</code> 文件，找到 <code>theme:</code> 项，将其修改为：</p>
<p>theme: stellar</p>
</blockquote>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="部署到github-pages">部署到github pages<a href="https://wangquanwwq.github.io/blog/2025/07/10/hexo%E9%83%A8%E7%BD%B2#%E9%83%A8%E7%BD%B2%E5%88%B0github-pages" class="hash-link" aria-label="Direct link to 部署到github pages" title="Direct link to 部署到github pages">​</a></h5>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 安装部署插件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install hexo-deployer-git --save</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="配置部署参数">配置部署参数<a href="https://wangquanwwq.github.io/blog/2025/07/10/hexo%E9%83%A8%E7%BD%B2#%E9%85%8D%E7%BD%AE%E9%83%A8%E7%BD%B2%E5%8F%82%E6%95%B0" class="hash-link" aria-label="Direct link to 配置部署参数" title="Direct link to 配置部署参数">​</a></h5>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> git@github.com</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">your_username/your_repo.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="部署">部署<a href="https://wangquanwwq.github.io/blog/2025/07/10/hexo%E9%83%A8%E7%BD%B2#%E9%83%A8%E7%BD%B2" class="hash-link" aria-label="Direct link to 部署" title="Direct link to 部署">​</a></h5>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hexo clean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hexo generate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -m "Initial commit"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hexo deploy</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="修改后更新">修改后更新<a href="https://wangquanwwq.github.io/blog/2025/07/10/hexo%E9%83%A8%E7%BD%B2#%E4%BF%AE%E6%94%B9%E5%90%8E%E6%9B%B4%E6%96%B0" class="hash-link" aria-label="Direct link to 修改后更新" title="Direct link to 修改后更新">​</a></h5>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 清理旧的生成文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hexo clean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 重新生成静态页面</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hexo generate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 提交</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -m "Initial commit"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 部署到 GitHub Pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hexo deploy</span><br></span></code></pre></div></div>]]></content>
        <author>
            <name>Wang Quan</name>
            <uri>https://github.com/WangQuanWWQ</uri>
        </author>
        <category label="Learn" term="Learn"/>
        <category label="Note" term="Note"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[创建git笔记仓库]]></title>
        <id>https://wangquanwwq.github.io/blog/2025/07/10/创建git笔记仓库</id>
        <link href="https://wangquanwwq.github.io/blog/2025/07/10/创建git笔记仓库"/>
        <updated>2025-07-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[使用 Git 和 Gitee 来管理和同步笔记内容是一个高效的方式。以下是如何创建一个新的 Git 仓库并将其推送到 Gitee 的步骤。]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>使用 Git 和 Gitee 来管理和同步笔记内容是一个高效的方式。以下是如何创建一个新的 Git 仓库并将其推送到 Gitee 的步骤。</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤-1创建一个新的-gitee-仓库">步骤 1：创建一个新的 Gitee 仓库<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E5%88%9B%E5%BB%BAgit%E7%AC%94%E8%AE%B0%E4%BB%93%E5%BA%93#%E6%AD%A5%E9%AA%A4-1%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84-gitee-%E4%BB%93%E5%BA%93" class="hash-link" aria-label="Direct link to 步骤 1：创建一个新的 Gitee 仓库" title="Direct link to 步骤 1：创建一个新的 Gitee 仓库">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤-2在本地初始化-git-仓库">步骤 2：在本地初始化 Git 仓库<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E5%88%9B%E5%BB%BAgit%E7%AC%94%E8%AE%B0%E4%BB%93%E5%BA%93#%E6%AD%A5%E9%AA%A4-2%E5%9C%A8%E6%9C%AC%E5%9C%B0%E5%88%9D%E5%A7%8B%E5%8C%96-git-%E4%BB%93%E5%BA%93" class="hash-link" aria-label="Direct link to 步骤 2：在本地初始化 Git 仓库" title="Direct link to 步骤 2：在本地初始化 Git 仓库">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 导航到笔记文件夹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /home/user/notes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化 Git 仓库</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 添加所有文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 提交文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -m "Initial commit of my notes"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 添加远程仓库地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git remote add origin https://gitee.com/your-username/my-notes.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 进行代码合并</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git pull --rebase origin master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 推送到 Gitee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push -u origin master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="步骤-6后续更新笔记并同步到-gitee">步骤 6：后续更新笔记并同步到 Gitee<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E5%88%9B%E5%BB%BAgit%E7%AC%94%E8%AE%B0%E4%BB%93%E5%BA%93#%E6%AD%A5%E9%AA%A4-6%E5%90%8E%E7%BB%AD%E6%9B%B4%E6%96%B0%E7%AC%94%E8%AE%B0%E5%B9%B6%E5%90%8C%E6%AD%A5%E5%88%B0-gitee" class="hash-link" aria-label="Direct link to 步骤 6：后续更新笔记并同步到 Gitee" title="Direct link to 步骤 6：后续更新笔记并同步到 Gitee">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 查看更改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 添加更改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 提交更改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -m "Update notes"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 推送到Gitee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push</span><br></span></code></pre></div></div>]]></content>
        <author>
            <name>Wang Quan</name>
            <uri>https://github.com/WangQuanWWQ</uri>
        </author>
        <category label="Note" term="Note"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[流媒体]]></title>
        <id>https://wangquanwwq.github.io/blog/2025/07/10/流媒体</id>
        <link href="https://wangquanwwq.github.io/blog/2025/07/10/流媒体"/>
        <updated>2025-07-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ffmpeg]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ffmpeg">ffmpeg<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#ffmpeg" class="hash-link" aria-label="Direct link to ffmpeg" title="Direct link to ffmpeg">​</a></h2>
<blockquote>
<p>ffmpeg 是用于处理音频、视频、字幕和相关元数据等多媒体内容的库和工具的集合。</p>
<ul>
<li>安装 <a href="https://www.tecmint.com/install-ffmpeg-in-linux/" target="_blank" rel="noopener noreferrer">https://www.tecmint.com/install-ffmpeg-in-linux/</a></li>
</ul>
</blockquote>
<blockquote>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -re -i car-brand.MOV -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://localhost/test</span><br></span></code></pre></div></div>
<ul>
<li>命令</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -i rtsp://admin:root123@192.168.66.119/ -vcodec copy -acodec copy  -rtsp_transport tcp -f rtsp rtsp://127.0.0.1/test.sdp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 音视频转码后推送</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -i rtsp://admin:root123@192.168.66.119/ -vcodec libx264 -acodec libvo_aacenc  -rtsp_transport tcp -f rtsp rtsp://127.0.0.1/test.sdp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -re -i ./car-brand.MOV -stream_loop -1  -vcodec libx264 -acodec aac -f rtsp rtsp://10.159.11.167:8194/car-brand</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -re -i ./car-brand.MOV -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://localhost/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -re -i ./car-brand.MOV -rtsp_transport udp -vcodec h264 -f rtsp rtsp://localhost/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -re -stream_loop -1 -i carbrand.MOV -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://localhost/test1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -re -stream_loop -1 -i carbrand.MOV -c copy                          -f rtsp rtsp://localhost:8554/mystream</span><br></span></code></pre></div></div>
<ul>
<li>ffmpeg参数</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 参考文档 https://ffmpeg.org/ffmpeg.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Main options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Force input or output file format. The format is normally auto detected for input files and guessed from the file extension for output files, so this option is not needed in most cases.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-f fmt              force format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Select an encoder (when used before an output file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or a decoder (when used before an input file) for one or more streams.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># codec is the name of a decoder/encoder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or a special value copy (output only) to indicate that the stream is not to be re-encoded.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c codec            codec name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-codec codec        codec name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># input file url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-i url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set number of times input stream shall be looped. Loop 0 means no loop, loop -1 means infinite loop.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -1 无限循环</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-stream_loop number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Video options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-r rate             set frame rate (Hz value, fraction or abbreviation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-vcodec codec       force video codec ('copy' to copy stream)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Audio options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-acodec codec       force audio codec ('copy' to copy stream)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Read input at native frame rate. Mainly used to simulate a grab device, or live input stream (e.g. when reading from a file).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 用来模拟一个摄像头或者实时流，不要在正式环境使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-re</span><br></span></code></pre></div></div>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="gb28181">GB28181<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#gb28181" class="hash-link" aria-label="Direct link to GB28181" title="Direct link to GB28181">​</a></h2>
<blockquote>
<p>[!note]</p>
<p>GB28181 协议是设备端主动向服务端发起注册消息，并定时发送保活消息，服务端收到后就认为设备在线，超时收不到保活的话就认为设备离线了。客户端发起播放视频请求时，服务端给指定的设备发送 INVITE 请求，通知设备将指定的通道的视频推送到服务端，服务端再转发给客户端，用户就可以播放了。</p>
<p>GB28181 传输协议是 RTP，去掉 RTP 头部，剩余数据为 H264 PS 流，可使用 VLC 直接播放</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gb28181-报文">GB28181 报文<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#gb28181-%E6%8A%A5%E6%96%87" class="hash-link" aria-label="Direct link to GB28181 报文" title="Direct link to GB28181 报文">​</a></h3>
<blockquote>
<p>[!note]</p>
<p>国标 IPC 的 IP 为 192.168.10.8， IPC 本地 SIP 端口为 60719， SIP ID 为 34020000002000000719；</p>
<p>SIP 服务器的 IP 为 192.168.10.10， SIP 服务器的端口为 57030， SIP ID 为 34020000002000000001。</p>
<p>整个国标信令部分基于 UDP 协议进行传输。</p>
<p>开发基于 <a href="https://github.com/resiprocate/resiprocate" target="_blank" rel="noopener noreferrer">resiprocate/resiprocate</a></p>
<ol>
<li>注册（REGISTER）</li>
<li>注销（CANCEL）</li>
<li>心跳（Keepalive）</li>
<li>INVITE</li>
<li>云台控制（PTZ）</li>
</ol>
<p>在 GB28181 的 2016 版中，对于媒体流的传输在原有 <strong>UDP 传输</strong>的基础中，增加了<strong>主动 tcp</strong> 和<strong>被动 tcp</strong> 的方式。</p>
<ul>
<li>
<p>UDP</p>
<p>GB28181 服务端在发 invite 时，在携带的 SDP 中包含了接收媒体的端口，设备端（被呼叫端）收到 invite 后，解析该端口，通过 UDP 将媒体流发向该端口。</p>
</li>
<li>
<p>TCP被动</p>
<p>GB28181 服务端在发 invite 时，在携带的 SDP 中包含了接收媒体的端口，并监听该端口的媒体数据，设备端（被呼叫端）收到 invite 后，解析该端口，通过 TCP 将媒体流发向该端口。</p>
</li>
<li>
<p>TCP主动</p>
<p>设备端（被呼叫端）告知服务端自己的媒体流 tcp 端口，服务端主动去连接设备端（被呼叫端）的该端口，获取数据。</p>
</li>
</ul>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gb28181的协议栈实现">GB28181的协议栈实现<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#gb28181%E7%9A%84%E5%8D%8F%E8%AE%AE%E6%A0%88%E5%AE%9E%E7%8E%B0" class="hash-link" aria-label="Direct link to GB28181的协议栈实现" title="Direct link to GB28181的协议栈实现">​</a></h3>
<blockquote>
<p>[!note]</p>
<p>GB/T-28181 协议其实就是在国际上通用的 <code>SIP 协议进行私有化定制</code>， 流媒体方面就是在国际最流行的编码上进行封装（当然也有我们国家的编码标准 <code>SVAC</code>）。</p>
<p><code>libosip + libexosip + libxml</code> 来实现 IPC 和平台协议功能，前面两者负责 sip 协议的实现，libxml 用来封装和解析实体信令。通过 3~4 年的市场应用感觉挺稳定的。</p>
<p>流媒体方面：从编码中获取的 <code>h.264 + g711</code> 的视音频帧，进行 PS 媒体协议封装（自己写的 PS 封装协议），再经过 RTP 传输协议（自己实现）发送至平台。</p>
<p>平台对收到的 RTP 流媒体进行解 RTP, 解 PS，再进行 <code>h.264 + g711</code> 的解码。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sip协议">SIP协议<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#sip%E5%8D%8F%E8%AE%AE" class="hash-link" aria-label="Direct link to SIP协议" title="Direct link to SIP协议">​</a></h3>
<blockquote>
<p>[!note]</p>
<p>会话初始协议</p>
<p>SIP 协议是一个应用层的点对点协议，用于初始、管理和终止网络中的语音和视频会话，是 <code>GB28181</code> 的核心之一。</p>
<p>会话发起协议（ Session Initiation Protocol，缩写  SIP）是一个由  <a href="https://www.wikiwand.com/zh-cn/IETF" target="_blank" rel="noopener noreferrer">IETF</a> <a href="https://web.archive.org/web/20051206085212/http://www.ietf.org/html.charters/mmusic-charter.html" target="_blank" rel="noopener noreferrer">MMUSIC 工作组</a>开发的协议，作为标准被提议用于创建，修改和终止包括视频，语音，<a href="https://www.wikiwand.com/zh-cn/%E5%8D%B3%E6%97%B6%E9%80%9A%E4%BF%A1" target="_blank" rel="noopener noreferrer">即时通信</a>，<a href="https://www.wikiwand.com/zh-cn/%E5%9C%A8%E7%BA%BF%E6%B8%B8%E6%88%8F" target="_blank" rel="noopener noreferrer">在线游戏</a>和<a href="https://www.wikiwand.com/zh-cn/%E8%99%9A%E6%8B%9F%E7%8E%B0%E5%AE%9E" target="_blank" rel="noopener noreferrer">虚拟现实</a>等多种多媒体元素在内的交互式用户会话。2000 年 11 月，SIP 被正式批准成为  <a href="https://www.wikiwand.com/zh-cn/3GPP" target="_blank" rel="noopener noreferrer">3GPP</a> 信号协议之一，并成为  <a href="https://www.wikiwand.com/zh-cn/IP%E5%A4%9A%E5%AA%92%E4%BD%93%E5%AD%90%E7%B3%BB%E7%BB%9F" target="_blank" rel="noopener noreferrer">IMS</a> 体系结构的一个永久单元。SIP 与  <a href="https://www.wikiwand.com/zh-cn/H.323" target="_blank" rel="noopener noreferrer">H.323</a> 一样，是用于  <a href="https://www.wikiwand.com/zh-cn/VoIP" target="_blank" rel="noopener noreferrer">VoIP</a> 最主要的信令协议之一。</p>
<ul>
<li><a href="https://www.antisip.com/" target="_blank" rel="noopener noreferrer">Antisip</a></li>
<li><a href="https://www.wikiwand.com/en/List_of_SIP_software" target="_blank" rel="noopener noreferrer">List of SIP software</a></li>
</ul>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="osip-vs-exosip">osip vs exosip<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#osip-vs-exosip" class="hash-link" aria-label="Direct link to osip vs exosip" title="Direct link to osip vs exosip">​</a></h3>
<blockquote>
<p>[!note]</p>
<ul>
<li>
<p><strong>osip</strong></p>
<p>oSIP is a <a href="https://www.wikiwand.com/en/Free_software" target="_blank" rel="noopener noreferrer">free software</a> library for <a href="https://www.wikiwand.com/en/VoIP" target="_blank" rel="noopener noreferrer">VoIP</a> applications implementing lower layers of <a href="https://www.wikiwand.com/en/Session_Initiation_Protocol" target="_blank" rel="noopener noreferrer">Session Initiation Protocol</a> (SIP).</p>
<p>oSIP 的开发开始于 2000 年 7 月，第一个版本在 2001 年 5 月发布。</p>
<p>oSIP 采用 ANSI C 编写，而且结构简单小巧，所以速度特别快。</p>
<p>它并不提供高层的 SIP 会话 控制 API，它主要提供一些解析 SIP/SDP 消息的 API 和事务处理的状态机。</p>
<p>oSIP 不提供任何快速产生请求消息和响应消息的方法，所有请求消息和响应消息的形成必须调用一组 sip message api 来手动组装完成，</p>
<p>oSIP 的作者还开发了基于 oSIP 的 UA <code>lib:exosip</code> 和 proxy server <code>lib:partysip</code></p>
<p>Software using oSIP</p>
<ul>
<li>eXosip, the “eXtended osip” library. An extension of oSIP for softphone implementation written by Aymeric Moizard.</li>
<li><a href="https://www.wikiwand.com/en/GNU_SIP_Witch" target="_blank" rel="noopener noreferrer">GNU SIP Witch</a></li>
</ul>
</li>
<li>
<p><strong>exosip</strong></p>
</li>
</ul>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pjsip">pjsip<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#pjsip" class="hash-link" aria-label="Direct link to pjsip" title="Direct link to pjsip">​</a></h3>
<blockquote>
<p>[!note]</p>
<p>PJSIP 是一个开源的 SIP 协议库，它实现了 SIP、SDP、RTP、STUN、TURN 和 ICE。PJSIP 作为基于 SIP 的一个多媒体通信框架提供了非常清晰的 API，以及 NAT 穿越的功能。PJSIP 具有非常好的移植性，几乎支持现今所有系统：从桌面系统、嵌入式系统到智能手机。</p>
<p>PJSIP 同时支持语音、视频、状态呈现和即时通讯。PJSIP 具有非常完善的文档，对开发者非常友好。</p>
<p>PJSIP 由 Benny Prijono、Perry Ismangil 在 2005 年创建，之后不久，Nanang Izzuddin、Sauw Ming 加入开发团队。2006 年成立 Teluu Ltd.，成为开发和维护 PJSIP 的公司。PJSIP 采用双 License：GPLv2 以及商业许可证，开发者可以根据需要选择不同的 License。</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sdpsession-description-protocol">SDP(Session Description Protocol)<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#sdpsession-description-protocol" class="hash-link" aria-label="Direct link to SDP(Session Description Protocol)" title="Direct link to SDP(Session Description Protocol)">​</a></h2>
<blockquote>
<p>[!note]</p>
<p>SDP 本身并不提供媒体服务，它只是描述了媒体服务在哪，以及如何和那个媒体服务打交道。</p>
<p>媒体传输相关的协议在 SIP 消息 SDP 段携带， 在服务器和客户端之间进行商议。</p>
<p>SDP 协议的具体内容参看：<a href="https://www.ietf.org/rfc/rfc2327.txt" target="_blank" rel="noopener noreferrer">RFC2327</a></p>
<p>由于 Web 端、IOS、Android、PC、MAC 端的差异性导致它们对音视频的支持能力不同， 所以我们进行一些音视频会话之前，需要交互下彼此的音视频编解码能力、网络带宽和传输协议等信息， 这些需要协商的信息需要用 SDP 来描述。</p>
<p>SDP 并不是传输协议，需要用 RTSP、SIP、HTTP 等协议进行承载传输、交换， 如果大家协调好了之后，就可以建立会话，完成真实的音视频码流传输，再完成解码和播放。</p>
<p>SDP 一般用在媒体会话建立之前，可以适用于实时流媒体、点播、直播等领域，特别在音视频通话、视频会议、VoIP、视频监控等领域应用较多。 媒体码流一般基于 RTP 传输，服务质量用 RTCP 协议保障。</p>
<p>但是 SDP 的交互不是所有音视频会话建立时都是必须的，假如双方提前约定好这些音视频会话创建需要的信息就不用这个步骤来交互彼此的 SDP 信息， 比如 HTTP-FLV、RTMP-FLV 直播和点播方案，因为一旦采用了这套方案，这些音视频会话建立需要的信息都是确定的， 但是这样会降低或者说没有充分发挥端到端的音视频能力，协商显得更加灵活点。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sdp作用">SDP作用<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#sdp%E4%BD%9C%E7%94%A8" class="hash-link" aria-label="Direct link to SDP作用" title="Direct link to SDP作用">​</a></h3>
<p>SDP 作用包括以下一些方面</p>
<ul>
<li>建立会话的详细信息，包括名称，网络，带宽等信息</li>
<li>包含在会话中的媒体信息，包括：<!-- -->
<ul>
<li>媒体类型 (video, audio, etc)</li>
<li>传输协议 (RTP/UDP/IP, H.320, etc)</li>
<li>媒体格式 (H.261 video, MPEG video, etc)</li>
<li>多播或远端（单播）地址和端口</li>
</ul>
</li>
<li>为接收媒体而需的信息</li>
<li>使用的带宽信息</li>
<li>可信赖的接洽信息</li>
</ul>
<p>如果拓展，还可以描述会话的安全方案信息、服务质量信息等，其中 <code>WebRTC</code> 就在 SDP 的基础上进行了继续拓展</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="协议包格式protocol-sipsdp">协议包格式（Protocol: <code>SIP/SDP</code>）<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E5%8D%8F%E8%AE%AE%E5%8C%85%E6%A0%BC%E5%BC%8Fprotocol-sipsdp" class="hash-link" aria-label="Direct link to 协议包格式protocol-sipsdp" title="Direct link to 协议包格式protocol-sipsdp">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 238: 633 bytes on wire (5064 bits), 633 bytes captured (5064 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52), Dst: Apple_70:23:0d (88:e9:fe:70:23:0d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.109, Dst: 192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Status-Line: SIP/2.0 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Status-Code: 200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Request Frame: 234]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Response Time (ms): 17]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.64.3:15060;rport=5060;branch=z9hG4bK575396672;received=192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000002000000001@3402000000&gt;;tag=139396672</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;;tag=403895202</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 325396492</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 3 INVITE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Contact: &lt;sip:34020000001320000001@192.168.64.3:41073&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Type: application/sdp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: IP Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length:   191</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Session Description Protocol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Session Description Protocol Version (v): 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Owner/Creator, Session Id (o): 34020000001320000001 1136 1136 IN IP4 192.168.137.109</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Session Name (s): Play</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Connection Information (c): IN IP4 192.168.137.109</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Time Description, active time (t): 0 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Description, name and address (m): video 15060 RTP/AVP 96</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Attribute (a): sendonly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Attribute (a): rtpmap:96 PS/90000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Attribute (a): filesize:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Unknown: y=0200000001</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sip">SIP<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#sip" class="hash-link" aria-label="Direct link to SIP" title="Direct link to SIP">​</a></h2>
<blockquote>
<p>[!note]</p>
<p>SIP 协议使用 RTP 协议传送音视频数据流，使用 SDP 协议进行媒体描述。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="call-id">CALL-ID<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#call-id" class="hash-link" aria-label="Direct link to CALL-ID" title="Direct link to CALL-ID">​</a></h3>
<p>SIP 的一次通话，可以通过 <code>From</code>, <code>To</code>, <code>Call-ID</code> 三元组来区分。</p>
<p>CALL-ID 字段用于标识一个特定邀请以及与这个邀请相关的所有后续事务（即标识一个会话）</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="包内容">包内容<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E5%8C%85%E5%86%85%E5%AE%B9" class="hash-link" aria-label="Direct link to 包内容" title="Direct link to 包内容">​</a></h3>
<ul>
<li>Message</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (MESSAGE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Request-Line: MESSAGE sip:34020000002000000001@3402000000 SIP/2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.137.109:5060;rport;branch=z9hG4bK1013136823</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000001320000001@3402000000&gt;;tag=676399389</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000002000000001@3402000000&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 1119613114</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 20 MESSAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Type: Application/MANSCDP+xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Max-Forwards: 70</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: IP Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length:   178</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;?xml version="1.0" encoding="GB2312"?&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Notify&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;CmdType&gt;Keepalive&lt;/CmdType&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;SN&gt;123&lt;/SN&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;DeviceID&gt;34020000001320000001&lt;/DeviceID&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Status&gt;OK&lt;/Status&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Info&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Info&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Notify&gt;\n</span><br></span></code></pre></div></div>
<ul>
<li>Bye</li>
</ul>
<p><strong>同一个会话，CSeq 要 +1</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Invite-&gt;100-&gt;200-&gt;Ack -&gt;Bye-&gt;200</span><br></span></code></pre></div></div>
<p>Bye 的包，From 和 To 要和 Ack 的一致（包括 <code>tag</code>），Call-ID 也要一致</p>
<ul>
<li>包字段</li>
</ul>
<p>MANSCDP 消息中的 SN 值用于与请求命令的匹配处理,响应命令中的 SN 值应使用请求命令中的 SN 值。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sip-proxy">SIP Proxy<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#sip-proxy" class="hash-link" aria-label="Direct link to SIP Proxy" title="Direct link to SIP Proxy">​</a></h3>
<p>SIP Proxy 有分为两种模式，一种是状态代理模式，另外一种是无状态代理模式。</p>
<p>SIP 代理自己本身不能发起 <code>INVITE</code> 或者 <code>BYE</code> 请求，这样就不能满足 IP 语音通信的基本呼叫功能。</p>
<p>双方终端通过多个 Proxy 代理以后，根据 <code>Route Set</code> 返回处理流程。 但是，在一些情况下，如果终端忽略了 <code>Route Set</code> 以后，直接通过呼叫方和被呼叫方，双方可能进行非法呼叫， 它们跳过了代理服务器，导致业务控制层很难对其进行管理。</p>
<p>为了解决这个问题，引入了 <code>B2BUA</code> 机制，通过背靠背的方式来实现业务能力的管理和会话的管理。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="b2bua">B2BUA<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#b2bua" class="hash-link" aria-label="Direct link to B2BUA" title="Direct link to B2BUA">​</a></h3>
<p>B2BUA 是一个逻辑实体，它由一个 UAS 和一个 UAC 两个部分构成，分别负责接收请求，处理请求和生成请求。 B2BUA 和 SIP 代理不同，它必须保持在 dialog 中所有创建的请求。只有这样，B2BUA 才能完全控制所有需要管理的会话。</p>
<p>B2BUA 具体的构成如下：</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200623180051.png" alt="img" class="img_ev3q"></p>
<p>B2BUA 介于两个终端之间</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200624103643.png" alt="img" class="img_ev3q"></p>
<ol>
<li>UAC 对 B2BUA 发起一个 INVITE 请求，在 B2BUA 端，B2BUA 是一个 UAS 来接收这个请求，创建了第一个会话来管理这个请求。双方保存了彼此的 Route Set 记录消息。</li>
<li>为了对另外一个终端发起 INVITE 请求，B2BUA 同时也扮演了一个 UAC 的角色，它创建了第二个会话，并且再次对下游终端发起 INVITE 请求。这里，UAC 需要从 UAS 端拷贝 SDP 消息和其他必要消息内容。然后，UAC 对下游终端发起 INVITE 请求。终端接收了 INVITE 请求，并且保存了 Route Set 数据记录。</li>
<li>为了响应 INVITE 请求，这里，下游终端就会变成一个 UAS 回复 B2BUA 200 OK。B2BUA 再次拷贝 200 OK 的消息，然后通过 UAS 再次返回到 UAC 终端。</li>
<li>UAC 终端收到 200 OK 以后，保存为 Route Set 数据内容。</li>
</ol>
<p>如果计费模块检测到双方呼叫费用出现超额的时候，这时，B2BUA 会切换成 UAC/UAC 的状态，同时对终端发送 BYE 消息。</p>
<hr>
<h1>GB28181 协议解析</h1>
<p>点击在线查看标准完整文本： <a href="http://c.gb688.cn/bzgk/gb/showGb?type=online&amp;hcno=469659DC56B9B8187671FF08748CEC89" target="_blank" rel="noopener noreferrer">公共安全视频监控联网系统信息传输、交换、控制技术要求。</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="名词解释">名词解释<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A" class="hash-link" aria-label="Direct link to 名词解释" title="Direct link to 名词解释">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sip-服务器">SIP 服务器<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#sip-%E6%9C%8D%E5%8A%A1%E5%99%A8" class="hash-link" aria-label="Direct link to SIP 服务器" title="Direct link to SIP 服务器">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sip-client">SIP client<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#sip-client" class="hash-link" aria-label="Direct link to SIP client" title="Direct link to SIP client">​</a></h3>
<p>具有注册登记、建立 / 终止会话连接、接收和播放视音频流等功能，主要包括用户界面、用户代理 (UA)、媒体解码模块和媒体通信模块。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sip-device">SIP device<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#sip-device" class="hash-link" aria-label="Direct link to SIP device" title="Direct link to SIP device">​</a></h3>
<p>具有注册、建立 / 终止会话连接和控制、采集 / 编解码以及传送视音频流等的功能实体，主要包括用户代理 (UA)、媒体采集 / 编解码模块和媒体通信模块。</p>
<p>联网系统中 SIP 设备的实现形式主要有支持 SIP 协议的网络摄像机、视频编 / 解码设备、数字硬盘录像机 (DVR) 和报警设备等。若 SIP 设备具有多路视音频编解码通道，每个通道宜成为一个 SIP 逻辑 UA, 具有唯一的 SIPURI, 并向 SIP 服务器注册。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sip-监控域-sip-surveil-lance-realm">SIP 监控域 SIP surveil lance realm<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#sip-%E7%9B%91%E6%8E%A7%E5%9F%9F-sip-surveil-lance-realm" class="hash-link" aria-label="Direct link to SIP 监控域 SIP surveil lance realm" title="Direct link to SIP 监控域 SIP surveil lance realm">​</a></h3>
<p>支持本标准规定的通信协议的监控网络，通常由 SIP 服务器和注册在 SIP 服务器上的监控资源、用户终端、网络等组成。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="注册服务器-register-server">注册服务器 register server<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E6%B3%A8%E5%86%8C%E6%9C%8D%E5%8A%A1%E5%99%A8-register-server" class="hash-link" aria-label="Direct link to 注册服务器 register server" title="Direct link to 注册服务器 register server">​</a></h3>
<p>IETF RFC 3261 规定的 SIP 逻辑实体，是具有接收注册请求、将请求中携带的信息进行保存并提供本域内位置服务的功能服务器。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="中心信令控制服务器-center-control-server">中心信令控制服务器 center control server<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E4%B8%AD%E5%BF%83%E4%BF%A1%E4%BB%A4%E6%8E%A7%E5%88%B6%E6%9C%8D%E5%8A%A1%E5%99%A8-center-control-server" class="hash-link" aria-label="Direct link to 中心信令控制服务器 center control server" title="Direct link to 中心信令控制服务器 center control server">​</a></h3>
<p>具有向 SIP 客户端、SIP 设备、媒体服务器和网关提供注册、路由选择以及逻辑控制功能，并且提供接口与应用服务器通信。</p>
<p>组成中心信令控制的逻辑实体包括代理服务器、注册服务器、重定向服务器、背靠背用户代理等的一种或者几种，是负责核心 SIP 信令应用处理的 SIP 服务器。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="媒体服务器-media-server">媒体服务器 media server<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1%E5%99%A8-media-server" class="hash-link" aria-label="Direct link to 媒体服务器 media server" title="Direct link to 媒体服务器 media server">​</a></h3>
<p>提供实时媒体流的转发服务，提供媒体的存储、历史媒体信息的检索和点播服务。</p>
<p>媒体服务器接收来自 SIP 设备、网关或其他媒体服务器等设备的媒体数据，并根据指令，将这些数据转发到其他单个或者多个 SIP 客户端和媒体服务器。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="信令安全路由网关-secure-signal-routing-gateway">信令安全路由网关 secure signal routing gateway<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E4%BF%A1%E4%BB%A4%E5%AE%89%E5%85%A8%E8%B7%AF%E7%94%B1%E7%BD%91%E5%85%B3-secure-signal-routing-gateway" class="hash-link" aria-label="Direct link to 信令安全路由网关 secure signal routing gateway" title="Direct link to 信令安全路由网关 secure signal routing gateway">​</a></h3>
<p>具有接收或转发域内外 SIP 信令功能，并且完成信令安全路由网关间路由信息的传递以及路由信令、信令身份标识的添加和鉴别等功能，是一种具有安全功能的 SIP 服务器。</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sip-监控域互联结构">SIP 监控域互联结构<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#sip-%E7%9B%91%E6%8E%A7%E5%9F%9F%E4%BA%92%E8%81%94%E7%BB%93%E6%9E%84" class="hash-link" aria-label="Direct link to SIP 监控域互联结构" title="Direct link to SIP 监控域互联结构">​</a></h2>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="gb28181-通信协议结构">GB28181 通信协议结构<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#gb28181-%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E7%BB%93%E6%9E%84" class="hash-link" aria-label="Direct link to GB28181 通信协议结构" title="Direct link to GB28181 通信协议结构">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200624112224.png" alt="img" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="交互过程">交互过程<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E4%BA%A4%E4%BA%92%E8%BF%87%E7%A8%8B" class="hash-link" aria-label="Direct link to 交互过程" title="Direct link to 交互过程">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="客户端主动发起">客户端主动发起<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%BB%E5%8A%A8%E5%8F%91%E8%B5%B7" class="hash-link" aria-label="Direct link to 客户端主动发起" title="Direct link to 客户端主动发起">​</a></h3>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200605171529.png" alt="img" class="img_ev3q"></p>
<p>趣解：</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200605174748.png" alt="img" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="第三方呼叫控制">第三方呼叫控制<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%91%BC%E5%8F%AB%E6%8E%A7%E5%88%B6" class="hash-link" aria-label="Direct link to 第三方呼叫控制" title="Direct link to 第三方呼叫控制">​</a></h3>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200605171610.png" alt="img" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="编码规则">编码规则<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E7%BC%96%E7%A0%81%E8%A7%84%E5%88%99" class="hash-link" aria-label="Direct link to 编码规则" title="Direct link to 编码规则">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="设备-id-通道-id"><code>设备 ID</code>, <code>通道 ID</code><a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#%E8%AE%BE%E5%A4%87-id-%E9%80%9A%E9%81%93-id" class="hash-link" aria-label="Direct link to 设备-id-通道-id" title="Direct link to 设备-id-通道-id">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 一共 20 位</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">34020000001320000001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">省 市  区 单位 行业 设备类型 网络标识 设备序号</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">34 02 00 00   00   132      0    000001</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200629104922.png" alt="img" class="img_ev3q"> <img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200629105015.png" alt="img" class="img_ev3q"> <img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200629105039.png" alt="img" class="img_ev3q"></p>
<h1>数据包</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="register">Register<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#register" class="hash-link" aria-label="Direct link to Register" title="Direct link to Register">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-register-no-auth">request: Register (no auth)<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#request-register-no-auth" class="hash-link" aria-label="Direct link to request: Register (no auth)" title="Direct link to request: Register (no auth)">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 2117: 442 bytes on wire (3536 bits), 442 bytes captured (3536 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52), Dst: Apple_70:23:0d (88:e9:fe:70:23:0d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.109, Dst: 192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (REGISTER)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Request-Line: REGISTER sip:34020000002000000001@3402000000 SIP/2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Method: REGISTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Request-URI: sip:34020000002000000001@3402000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: True]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Suspected resend of frame: 1613]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.137.109:5060;rport;branch=z9hG4bK1935014795</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000001320000001@3402000000&gt;;tag=496441511</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 1188137981</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 1 REGISTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Contact: &lt;sip:34020000001320000001@192.168.137.109:5060&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Max-Forwards: 70</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: IP Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Expires: 3600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length: 0</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="response-401">response: 401<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#response-401" class="hash-link" aria-label="Direct link to response: 401" title="Direct link to response: 401">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 2121: 524 bytes on wire (4192 bits), 524 bytes captured (4192 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: Apple_70:23:0d (88:e9:fe:70:23:0d), Dst: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.105, Dst: 192.168.137.109</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (401)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Status-Line: SIP/2.0 401 Unauthorized</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Status-Code: 401</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Request Frame: 1613]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Response Time (ms): 15594]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.137.109:5060;rport=47918;received=192.168.64.3;branch=z9hG4bK1935014795</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000001320000001@3402000000&gt;;tag=496441511</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;;tag=697042285</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 1 REGISTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 1188137981</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: LiveGBS v200603</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Contact: &lt;sip:34020000002000000001@192.168.64.3:15060&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WWW-Authenticate: Digest realm="3402000000",qop="auth",nonce="a1b6ba00d8cbaa8ce99d1d39b2905d12"</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-register-auth">request: register (auth)<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#request-register-auth" class="hash-link" aria-label="Direct link to request: register (auth)" title="Direct link to request: register (auth)">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 2122: 704 bytes on wire (5632 bits), 704 bytes captured (5632 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52), Dst: Apple_70:23:0d (88:e9:fe:70:23:0d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.109, Dst: 192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (REGISTER)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Request-Line: REGISTER sip:34020000002000000001@3402000000 SIP/2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Method: REGISTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Request-URI: sip:34020000002000000001@3402000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.137.109:5060;rport;branch=z9hG4bK2038639153</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000001320000001@3402000000&gt;;tag=496441511</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 1188137981</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 2 REGISTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Contact: &lt;sip:34020000001320000001@192.168.137.109:5060&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         [truncated]Authorization: Digest username="34020000001320000001", realm="3402000000", nonce="a1b6ba00d8cbaa8ce99d1d39b2905d12", uri="sip:34020000002000000001@3402000000", response="487b46591eae35a8d8f684db454ec471", algorithm=MD5, cnonce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Max-Forwards: 70</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: IP Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Expires: 3600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length: 0</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200609141735.png" alt="img" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="response-200">response: 200<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#response-200" class="hash-link" aria-label="Direct link to response: 200" title="Direct link to response: 200">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 2123: 463 bytes on wire (3704 bits), 463 bytes captured (3704 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: Apple_70:23:0d (88:e9:fe:70:23:0d), Dst: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.105, Dst: 192.168.137.109</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Status-Line: SIP/2.0 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Status-Code: 200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Request Frame: 2122]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Response Time (ms): 17]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.137.109:5060;rport=60954;received=192.168.64.3;branch=z9hG4bK2038639153</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000001320000001@3402000000&gt;;tag=496441511</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;;tag=410042311</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 2 REGISTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 1188137981</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: LiveGBS v200603</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Contact: &lt;sip:34020000002000000001@192.168.64.3:15060&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Date: 2020-06-09T14:09:01.830</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Expires: 3600</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="remove-1-binding">remove 1 binding<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#remove-1-binding" class="hash-link" aria-label="Direct link to remove 1 binding" title="Direct link to remove 1 binding">​</a></h3>
<p>有 remove 1 binding, 然后重新 register 的现象</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200609142346.png" alt="img" class="img_ev3q"></p>
<p>Message Header：</p>
<ul>
<li>CSeq 加 1，</li>
<li>Contact 的 <code>expires=0</code></li>
</ul>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200609142442.png" alt="img" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="message">Message<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#message" class="hash-link" aria-label="Direct link to Message" title="Direct link to Message">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-sip-server---ipc">request: sip server -&gt; ipc<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#request-sip-server---ipc" class="hash-link" aria-label="Direct link to request: sip server -> ipc" title="Direct link to request: sip server -> ipc">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 2136: 571 bytes on wire (4568 bits), 571 bytes captured (4568 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: Apple_70:23:0d (88:e9:fe:70:23:0d), Dst: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.105, Dst: 192.168.137.109</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (MESSAGE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Request-Line: MESSAGE sip:34020000001320000001@3402000000 SIP/2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Method: MESSAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Request-URI: sip:34020000001320000001@3402000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.64.3:15060;rport;branch=z9hG4bK268043391</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000002000000001@3402000000&gt;;tag=181043391</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 44043391</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 1 MESSAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Type: Application/MANSCDP+xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Max-Forwards: 70</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: LiveGBS v200603</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length: 162</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;?xml version="1.0" encoding="UTF-8"?&gt;\r\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Query&gt;\r\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;CmdType&gt;Catalog&lt;/CmdType&gt;\r\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;SN&gt;445043391&lt;/SN&gt;\r\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;DeviceID&gt;34020000001320000001&lt;/DeviceID&gt;\r\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Query&gt;\r\n</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="response-ipc---sip-server">response: ipc -&gt; sip server<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#response-ipc---sip-server" class="hash-link" aria-label="Direct link to response: ipc -> sip server" title="Direct link to response: ipc -> sip server">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 2137: 352 bytes on wire (2816 bits), 352 bytes captured (2816 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52), Dst: Apple_70:23:0d (88:e9:fe:70:23:0d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.109, Dst: 192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Status-Line: SIP/2.0 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Status-Code: 200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Request Frame: 2136]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Response Time (ms): 5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.64.3:15060;rport=5060;branch=z9hG4bK268043391;received=192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000002000000001@3402000000&gt;;tag=181043391</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;;tag=2000290983</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 44043391</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 1 MESSAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: IP Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length: 0</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-ipc---sip-server">request: ipc -&gt; sip server<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#request-ipc---sip-server" class="hash-link" aria-label="Direct link to request: ipc -> sip server" title="Direct link to request: ipc -> sip server">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 2138: 1001 bytes on wire (8008 bits), 1001 bytes captured (8008 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52), Dst: Apple_70:23:0d (88:e9:fe:70:23:0d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.109, Dst: 192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (MESSAGE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Request-Line: MESSAGE sip:34020000002000000001@3402000000 SIP/2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Method: MESSAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Request-URI: sip:34020000002000000001@3402000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.137.109:5060;rport;branch=z9hG4bK461606833</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000001320000001@3402000000&gt;;tag=106117409</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000002000000001@3402000000&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 2113631911</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 20 MESSAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Type: Application/MANSCDP+xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Max-Forwards: 70</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: IP Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length:   591</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;?xml version="1.0" encoding="GB2312"?&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Response&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;CmdType&gt;Catalog&lt;/CmdType&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;SN&gt;445043391&lt;/SN&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;DeviceID&gt;34020000001320000001&lt;/DeviceID&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;SumNum&gt;1&lt;/SumNum&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;DeviceList Num="1"&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Item&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;DeviceID&gt;34020000001320000001&lt;/DeviceID&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Name&gt;Camera 01&lt;/Name&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Manufacturer&gt;Hikvision&lt;/Manufacturer&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Model&gt;IP Camera&lt;/Model&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Owner&gt;Owner&lt;/Owner&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;CivilCode&gt;3402000000&lt;/CivilCode&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Address&gt;Address&lt;/Address&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Parental&gt;0&lt;/Parental&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;ParentID&gt;34020000002000000001&lt;/ParentID&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;SafetyWay&gt;0&lt;/SafetyWay&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;RegisterWay&gt;1&lt;/RegisterWay&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Secrecy&gt;0&lt;/Secrecy&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Status&gt;ON&lt;/Status&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Item&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/DeviceList&gt;\n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Response&gt;\n</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-sip-server---ipc-1">request: sip server -&gt; ipc<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#request-sip-server---ipc-1" class="hash-link" aria-label="Direct link to request: sip server -> ipc" title="Direct link to request: sip server -> ipc">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 2139: 360 bytes on wire (2880 bits), 360 bytes captured (2880 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: Apple_70:23:0d (88:e9:fe:70:23:0d), Dst: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.105, Dst: 192.168.137.109</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Status-Line: SIP/2.0 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Status-Code: 200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Request Frame: 2138]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Response Time (ms): 16]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.137.109:5060;rport=60954;received=192.168.64.3;branch=z9hG4bK461606833</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000001320000001@3402000000&gt;;tag=106117409</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000002000000001@3402000000&gt;;tag=443043407</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 20 MESSAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 2113631911</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: LiveGBS v200603</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length: 0</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="invite">Invite<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#invite" class="hash-link" aria-label="Direct link to Invite" title="Direct link to Invite">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-sip-server---ipc-sipsdp">request: sip server -&gt; ipc (SIP/SDP)<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#request-sip-server---ipc-sipsdp" class="hash-link" aria-label="Direct link to request: sip server -> ipc (SIP/SDP)" title="Direct link to request: sip server -> ipc (SIP/SDP)">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 288: 746 bytes on wire (5968 bits), 746 bytes captured (5968 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: Apple_70:23:0d (88:e9:fe:70:23:0d), Dst: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.105, Dst: 192.168.137.109</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (INVITE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Request-Line: INVITE sip:34020000001320000001@3402000000 SIP/2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Method: INVITE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Request-URI: sip:34020000001320000001@3402000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.64.3:15060;rport;branch=z9hG4bK685516389</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000002000000001@3402000000&gt;;tag=171516389</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 16516245</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 4 INVITE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Type: APPLICATION/SDP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Contact: &lt;sip:34020000002000000001@192.168.64.3:15060&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Max-Forwards: 70</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: LiveGBS v200603</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Subject: 34020000001320000001:0200000001,34020000002020000001:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length: 226</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Session Description Protocol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Session Description Protocol Version (v): 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Owner/Creator, Session Id (o): 34020000002000000001 0 0 IN IP4 192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Session Name (s): Play</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Connection Information (c): IN IP4 192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Time Description, active time (t): 0 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Description, name and address (m): video 30000 RTP/AVP 96 97 98</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Attribute (a): recvonly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Attribute (a): rtpmap:96 PS/90000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Attribute (a): rtpmap:97 MPEG4/90000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Attribute (a): rtpmap:98 H264/90000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Unknown: y=0200000001</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="response-100-trying-ipc---sip-server-sip">response: 100 Trying (ipc -&gt; sip server, SIP)<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#response-100-trying-ipc---sip-server-sip" class="hash-link" aria-label="Direct link to response: 100 Trying (ipc -> sip server, SIP)" title="Direct link to response: 100 Trying (ipc -> sip server, SIP)">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 295: 340 bytes on wire (2720 bits), 340 bytes captured (2720 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52), Dst: Apple_70:23:0d (88:e9:fe:70:23:0d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.109, Dst: 192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Status-Line: SIP/2.0 100 Trying</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Status-Code: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Request Frame: 288]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Response Time (ms): 16]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.64.3:15060;rport=5060;branch=z9hG4bK685516389;received=192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000002000000001@3402000000&gt;;tag=171516389</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 16516245</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 4 INVITE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: IP Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length: 0</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="response-200-ipc---sip-server-sipsdp">response: 200 (ipc -&gt; sip server, SIP/SDP)<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#response-200-ipc---sip-server-sipsdp" class="hash-link" aria-label="Direct link to response: 200 (ipc -> sip server, SIP/SDP)" title="Direct link to response: 200 (ipc -> sip server, SIP/SDP)">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 297: 632 bytes on wire (5056 bits), 632 bytes captured (5056 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52), Dst: Apple_70:23:0d (88:e9:fe:70:23:0d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.109, Dst: 192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Status-Line: SIP/2.0 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Status-Code: 200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Request Frame: 288]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Response Time (ms): 20]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.64.3:15060;rport=5060;branch=z9hG4bK685516389;received=192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000002000000001@3402000000&gt;;tag=171516389</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;;tag=614786748</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 16516245</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 4 INVITE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Contact: &lt;sip:34020000001320000001@192.168.64.3:55302&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Type: application/sdp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: IP Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length:   191</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Session Description Protocol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Session Description Protocol Version (v): 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Owner/Creator, Session Id (o): 34020000001320000001 2346 2346 IN IP4 192.168.137.109</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Session Name (s): Play</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Connection Information (c): IN IP4 192.168.137.109</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Time Description, active time (t): 0 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Description, name and address (m): video 15060 RTP/AVP 96</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Attribute (a): sendonly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Attribute (a): rtpmap:96 PS/90000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Media Attribute (a): filesize:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Unknown: y=0200000001</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ack">ACK<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#ack" class="hash-link" aria-label="Direct link to ACK" title="Direct link to ACK">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-sip-server---ipc-sip">request: sip server -&gt; ipc (SIP)<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#request-sip-server---ipc-sip" class="hash-link" aria-label="Direct link to request: sip server -> ipc (SIP)" title="Direct link to request: sip server -> ipc (SIP)">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 298: 430 bytes on wire (3440 bits), 430 bytes captured (3440 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: Apple_70:23:0d (88:e9:fe:70:23:0d), Dst: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.105, Dst: 192.168.137.109</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 5060, Dst Port: 5060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Initiation Protocol (ACK)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Request-Line: ACK sip:34020000001320000001@3402000000 SIP/2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Method: ACK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Request-URI: sip:34020000001320000001@3402000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Resent Packet: False]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Request Frame: 288]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Response Time (ms): 61]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Via: SIP/2.0/UDP 192.168.64.3:15060;rport;branch=z9hG4bK193516446</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        From: &lt;sip:34020000002000000001@3402000000&gt;;tag=171516389</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        To: &lt;sip:34020000001320000001@3402000000&gt;;tag=614786748</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Call-ID: 16516245</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CSeq: 4 ACK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Contact: &lt;sip:34020000002000000001@192.168.64.3:15060&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Max-Forwards: 70</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        User-Agent: LiveGBS v200603</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Content-Length: 0</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rtp">RTP<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#rtp" class="hash-link" aria-label="Direct link to RTP" title="Direct link to RTP">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ipc---sip-server">ipc -&gt; sip server<a href="https://wangquanwwq.github.io/blog/2025/07/10/%E6%B5%81%E5%AA%92%E4%BD%93#ipc---sip-server" class="hash-link" aria-label="Direct link to ipc -> sip server" title="Direct link to ipc -> sip server">​</a></h3>
<p><code>Sequence number</code> 递增</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200609143948.png" alt="img" class="img_ev3q"></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame 299: 1454 bytes on wire (11632 bits), 1454 bytes captured (11632 bits) on interface 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ethernet II, Src: 98:df:82:6d:9e:52 (98:df:82:6d:9e:52), Dst: Apple_70:23:0d (88:e9:fe:70:23:0d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Internet Protocol Version 4, Src: 192.168.137.109, Dst: 192.168.137.105</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User Datagram Protocol, Src Port: 15060, Dst Port: 30000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Real-Time Transport Protocol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Stream setup by SDP (frame 288)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    10.. .... = Version: RFC 1889 Version (2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ..0. .... = Padding: False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...0 .... = Extension: False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .... 0000 = Contributing source identifiers count: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0... .... = Marker: False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Payload type: PS (96)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Sequence number: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Extended sequence number: 65536]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Timestamp: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Synchronization Source identifier: 0x0bebc201 (200000001)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Payload: 000001ba6e617c97940107599ffeffff01f2c2b4000001bb...</span><br></span></code></pre></div></div>]]></content>
        <author>
            <name>Wang Quan</name>
            <uri>https://github.com/WangQuanWWQ</uri>
        </author>
        <category label="Learn" term="Learn"/>
        <category label="Note" term="Note"/>
    </entry>
</feed>